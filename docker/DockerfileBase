FROM alpine

# Update the package repositories and install OpenSSH client
RUN apk update && apk upgrade && apk add openssh-client

# Generate SSH key pair
RUN mkdir /root/.ssh && \
    ssh-keygen -t rsa -f /root/.ssh/id_rsa -q -N ""

# Set appropriate permissions for the private key
RUN chmod 400 /root/.ssh/id_rsa

# Set the entrypoint to terminate after catting the key, so containers based on this image
# will not continue execution (they are not intended for ongoing processing)
ENTRYPOINT ["cat", "/root/.ssh/id_rsa.pub"]


