FROM node:20

# Create app directories
RUN mkdir -p /etc/alcove/ssl
WORKDIR /opt/alcove/

# Install the global gulp executable (container global)
RUN npm install gulp -g

# Install sendmail compatible executable
RUN apt-get update && apt-get install -y ssmtp && echo "FromLineOverride=YES" >> /etc/ssmtp/ssmtp.conf

# Entrypoint
COPY helloworld.sh /helloworld.sh

RUN chmod +x /helloworld.sh

USER node
EXPOSE 3000

CMD ["/helloworld.sh"]
